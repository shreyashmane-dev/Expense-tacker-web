const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/navbar-CG_Urtjh.js","assets/firebase-ClHfoL4X.js","assets/history-DZMJE9-u.js","assets/index-36fcbc82-Dp9LjbeE.js","assets/analysis-DfQqOra9.js","assets/charts-GB3rZ8sK.js"])))=>i.map(i=>d[i]);
import{a as p}from"./firebase-ClHfoL4X.js";import{onAuthStateChanged as I}from"https://www.gstatic.com/firebasejs/10.6.0/firebase-auth.js";import{o as w}from"./index-36fcbc82-Dp9LjbeE.js";console.log("Auth Guard: Initializing...");I(p,e=>{const r=window.location.pathname.includes("/auth/");e?(console.log("âœ… Auth Guard: User is authenticated:",e.email),r&&window.location.replace("/dashboard/home.html")):(console.warn("â›” Auth Guard: No user found."),r||window.location.replace("/auth/login.html"))});const S="modulepreload",L=function(e){return"/"+e},f={},s=function(t,r,m){let u=Promise.resolve();if(r&&r.length>0){let a=function(i){return Promise.all(i.map(l=>Promise.resolve(l).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),o=n?.nonce||n?.getAttribute("nonce");u=a(r.map(i=>{if(i=L(i),i in f)return;f[i]=!0;const l=i.endsWith(".css"),d=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${d}`))return;const c=document.createElement("link");if(c.rel=l?"stylesheet":S,l||(c.as="script"),c.crossOrigin="",c.href=i,o&&c.setAttribute("nonce",o),document.head.appendChild(c),l)return new Promise((v,_)=>{c.addEventListener("load",v),c.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${i}`)))})}))}function h(n){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=n,window.dispatchEvent(o),!o.defaultPrevented)throw n}return u.then(n=>{for(const o of n||[])o.status==="rejected"&&h(o.reason);return t().catch(h)})},g="expense_transactions";function y(){return JSON.parse(localStorage.getItem(g))||[]}function b(e){localStorage.setItem(g,JSON.stringify(e))}function A(e){const t=y();t.unshift(e),b(t)}function E(e){e=(e||"").toLowerCase();const t=y()||[];if(e.includes("balance")){let n=0,o=0;return t.forEach(a=>{a.type==="income"?n+=Number(a.amount)||0:o+=Number(a.amount)||0}),`Your balance is â‚¹${(n-o).toLocaleString()}`}if(e.includes("today")){const n=new Date().toISOString().split("T")[0];return`You spent â‚¹${t.filter(a=>a.date===n&&a.type==="expense").reduce((a,i)=>a+(Number(i.amount)||0),0).toLocaleString()} today`}const r=["food","shopping","travel","upi","entertainment","salary","bills"];for(let n of r)if(e.includes(n))return`You spent â‚¹${t.filter(a=>(a.category||"").toLowerCase()===n&&a.type==="expense").reduce((a,i)=>a+(Number(i.amount)||0),0).toLocaleString()} on ${n}`;const m=e.match(/(\d+[\d,]*)/)?.[1]?.replace(/,/g,"");if(e.includes("add")&&m){const n=Number(m),o={id:Date.now(),amount:n,type:e.includes("income")?"income":"expense",category:"AI",date:new Date().toISOString().split("T")[0],source:"ai"};return A(o),`Added â‚¹${n.toLocaleString()} transaction successfully`}const u=new Date().toISOString().slice(0,7);return t.filter(n=>(n.date||"").startsWith(u)&&n.type==="expense").reduce((n,o)=>n+(Number(o.amount)||0),0)>1e4?"âš ï¸ You are overspending this month. Consider reducing expenses.":"ğŸ¤– I can help with balance, spending, add expense, and insights."}typeof window<"u"&&(window.askAI=E);console.log("App Controller Loaded");function C(){const e=location.pathname.split("/").pop().replace(".html","");document.querySelectorAll(".navbar a").forEach(t=>{t.dataset.page===e&&t.classList.add("active")})}document.addEventListener("DOMContentLoaded",C);document.addEventListener("click",e=>{e.target.tagName==="BUTTON"&&(e.target.style.transform="scale(0.95)",setTimeout(()=>e.target.style.transform="scale(1)",120))});window.Capacitor?.isNativePlatform&&window.Capacitor.isNativePlatform()&&document.addEventListener("click",()=>{try{Capacitor.Plugins.Haptics.impact({style:"light"})}catch{}});w(p,e=>{e&&B()});function B(){N(),P()}function N(){if(document.querySelector(".navbar"))return;const e=document.getElementById("navbar");e&&fetch("/dashboard/navbar.html").then(t=>t.text()).then(t=>{e.innerHTML=t,s(()=>import("./navbar-CG_Urtjh.js"),__vite__mapDeps([0,1])).then(r=>{r.initNavbar&&r.initNavbar()}).catch(r=>{console.error("Failed to load navbar.js:",r)})}).catch(t=>{console.error("Failed to load navbar.html:",t)})}function P(){document.getElementById("income")&&(document.querySelector('script[src$="home.js"]')||s(()=>import("./home-3O2bPKV9.js").then(t=>t.h),[]).catch(t=>console.error("home load failed",t))),(document.getElementById("historyList")||document.getElementById("transactionsUl"))&&(document.querySelector('script[src$="history.js"]')||s(()=>import("./history-DZMJE9-u.js"),__vite__mapDeps([2,1,3])).catch(t=>console.error("history load failed",t))),(document.getElementById("categoryChart")||document.getElementById("trendChart")||document.getElementById("incomeExpenseChart"))&&(document.querySelector('script[src$="analysis.js"]')||s(()=>import("./analysis-DfQqOra9.js"),__vite__mapDeps([4,1,3])).catch(t=>console.error("analysis load failed",t)));const e=document.getElementById("aiAskBtn");e&&e.addEventListener("click",()=>{const t=document.getElementById("aiInput"),r=document.getElementById("aiOutput");t.value.trim()&&(r.textContent=E(t.value),t.value="")})}window.addEventListener("transactionAdded",()=>{(document.getElementById("transactionsUl")||document.getElementById("historyList"))&&s(()=>import("./history-DZMJE9-u.js"),__vite__mapDeps([2,1,3])).then(e=>{}).catch(()=>{}),(document.getElementById("categoryChart")||document.getElementById("trendChart"))&&s(()=>import("./charts-GB3rZ8sK.js"),__vite__mapDeps([5,1,3])).then(e=>{e.renderCharts&&e.renderCharts()}),document.getElementById("income")&&s(()=>import("./home-3O2bPKV9.js").then(e=>e.h),[]).then(()=>{}).catch(()=>{})});export{s as _,A as a,y as g};
