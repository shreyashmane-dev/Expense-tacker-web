import{a as b,g as u,_ as f}from"./navbar-gesture-B7OxCqBy.js";function m(){const n=Number(document.getElementById("amount")?.value||0),t=document.getElementById("type")?.value||"expense",o=document.getElementById("category")?.value||"Other",a=document.getElementById("note")?.value||"",c=document.getElementById("source"),s=c?.value||"cash",l=c?c.options[c.selectedIndex].text:"Cash";if(!n||n<=0){alert("Enter valid amount");return}const r=Date.now(),d={id:`txn_${r}`,amount:n,type:t,category:o,note:a,source:s,sourceLabel:l,timestamp:r,date:new Date(r).toISOString().split("T")[0]};b(d);const e=document.getElementById("addTxnBtn"),i=e?e.textContent:"Add Transaction";e&&(e.textContent="Added! âœ…",e.style.background="#10b981",setTimeout(()=>{e.textContent=i,e.style.background=""},2e3)),document.getElementById("amount").value="",document.getElementById("note").value="",window.dispatchEvent(new Event("transactionAdded"))}function g(){const n=u();let t=0,o=0;return n.forEach(a=>{a.type==="income"?t+=Number(a.amount)||0:o+=Number(a.amount)||0}),{income:t,expense:o,balance:t-o}}function E(){return u()}window.addManualTransaction=m;const x=Object.freeze(Object.defineProperty({__proto__:null,addManualTransactionFromUI:m,calculateSummary:g,getAllTransactions:E},Symbol.toStringTag,{value:"Module"}));function y(){const{income:n,expense:t,balance:o}=g(),a=document.getElementById("income"),c=document.getElementById("expense"),s=document.getElementById("balance");a&&(a.innerText="â‚¹"+n.toLocaleString()),c&&(c.innerText="â‚¹"+t.toLocaleString()),s&&(s.innerText="â‚¹"+o.toLocaleString());const l=Number(localStorage.getItem("monthlyBudget")||0),r=document.getElementById("budgetStatus"),d=document.getElementById("budgetProgress"),e=document.getElementById("budgetHint");if(r&&d)if(l>0){const i=Math.min(t/l*100,100);r.innerText=`â‚¹${t.toLocaleString()} / â‚¹${l.toLocaleString()}`,d.style.width=i+"%",i>=100?(d.style.background="#ef4444",e.innerText="âš ï¸ You have exceeded your monthly budget!",e.style.color="#ef4444"):i>80?(d.style.background="#f59e0b",e.innerText="ðŸš¨ Careful, you're near your budget limit.",e.style.color="#f59e0b"):(d.style.background="linear-gradient(90deg, #38bdf8, #2563eb)",e.innerText="âœ… You are well within your budget.",e.style.color="#64748b")}else r.innerText="No Budget Set",d.style.width="0%",e.innerText="Set a monthly budget in Profile settings."}window.addEventListener("DOMContentLoaded",()=>{y();const n=document.getElementById("addTxnBtn");n&&n.addEventListener("click",t=>{t.preventDefault(),window.addManualTransaction?window.addManualTransaction():f(()=>Promise.resolve().then(()=>x),void 0).then(o=>{o.addManualTransactionFromUI&&o.addManualTransactionFromUI()}).catch(()=>{})})});window.addEventListener("transactionAdded",y);const I=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));export{E as g,I as h};
